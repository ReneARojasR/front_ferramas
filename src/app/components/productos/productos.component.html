<div *ngIf="!products; else listaProductos">
  <p>Cargando productos...</p>
</div>

<mat-form-field appearance="fill">
  <mat-label>Tipo de producto</mat-label>
  <mat-select [(value)]="selectedTipo">
    <mat-option [value]="null">Todos</mat-option>
    <mat-option *ngFor="let tipo of tiposUnicos" [value]="tipo">
      {{ tipoLabels[tipo] || tipo }}
    </mat-option>
  </mat-select>
</mat-form-field>

<ng-template #listaProductos>
  <div *ngIf="filteredProducts.length > 0; else sinProductos" class="products-grid">

    <mat-card class="example-card" *ngFor="let producto of filteredProducts">
      <mat-card-header>
        <mat-card-title>{{ producto.nombre }}</mat-card-title>
      </mat-card-header>

      <img mat-card-image [src]="producto.imagen" alt="{{ producto.nombre }}" class="producto-imagen">

      <mat-card-content>
        <h2 class="precio">{{ producto.precio | currency:'CLP':'symbol':'1.0-0' }}</h2>
        <p>{{ producto.descripcion }}</p>
      </mat-card-content>

      <mat-card-actions>
        <button mat-button color="primary" (click)="agregarAlCarrito(producto)">Agregar a carrito</button>
      </mat-card-actions>
    </mat-card>
  </div>
</ng-template>

<ng-template #sinProductos>
  <p>No hay productos disponibles.</p>
</ng-template>
